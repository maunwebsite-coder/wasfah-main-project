<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="preload" as="style" href="https://wasfah.ae/build/assets/app-BPWzf21J.css" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/app-DeIeCXgO.js" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/header-Dt_uZCzA.js" /><link rel="stylesheet" href="https://wasfah.ae/build/assets/app-BPWzf21J.css" data-navigate-track="reload" /><script type="module" src="https://wasfah.ae/build/assets/app-DeIeCXgO.js" data-navigate-track="reload"></script>    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="csrf-token" content="FQTDzULAjLeEoQQZpND8X0zLCQWowQnBJTYqnEpb">
    <meta name="application-name" content="وصفة">
    <meta name="theme-color" content="#f97316">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="https://wasfah.ae/manifest.webmanifest">
    <link rel="apple-touch-icon" href="https://wasfah.ae/icons/icon-192x192.png">
    <title>عن وصفة - موقع وصفة</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Swiper.js for slider -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"/>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js" defer></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');

    html,
    body {
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Tajawal', sans-serif;
        background-color: #f8f8f8;
    }
    
    /* Mobile Responsive Improvements */
    @media (max-width: 768px) {
        .header-container {
            padding: 0.75rem 1rem;
        }
        
        .header-logo {
            height: 2.5rem;
        }
        
        .header-nav {
            display: none;
        }
        
        .mobile-menu-btn {
            display: block;
            padding: 0.5rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
        }
        
        .mobile-menu-btn:hover {
            background-color: #fef3c7;
            transform: scale(1.05);
        }
        
        .mobile-menu-btn:active {
            transform: scale(0.95);
        }
        
        /* Mobile cart counter styling */
        #mobile-cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #f97316;
            color: white;
            font-size: 0.75rem;
            font-weight: bold;
            border-radius: 50%;
            height: 20px;
            width: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 20px;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        
        #mobile-cart-count.hidden {
            display: none !important;
        }
        
        @keyframes pulse {
            0%, 100% { 
                transform: scale(1);
                opacity: 1;
            }
            50% { 
                transform: scale(1.1);
                opacity: 0.8;
            }
        }
        
        .mobile-menu {
            padding: 1rem;
            display: none;
            visibility: hidden;
            opacity: 0;
            transition: all 0.3s ease-in-out;
            transform: translateY(-10px);
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-top: 1px solid #e5e7eb;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 50;
        }
        
        .mobile-menu.show {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            transform: translateY(0);
        }
        
        .mobile-menu.hidden {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            transform: translateY(-10px);
        }
        
        /* إضافة تحسينات إضافية للقائمة المحمولة */
        .mobile-menu {
            transition: all 0.3s ease-in-out;
        }
        
        .mobile-menu.show {
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .mobile-menu-item {
            padding: 0.75rem;
            font-size: 1rem;
            transition: all 0.2s ease;
            border-radius: 0.5rem;
            margin-bottom: 0.25rem;
            position: relative;
            overflow: hidden;
        }
        
        .mobile-menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(249, 115, 22, 0.1), transparent);
            transition: width 0.3s ease;
        }
        
        .mobile-menu-item:hover::before {
            width: 100%;
        }
        
        .mobile-menu-item:hover {
            background-color: #fef3c7;
            transform: translateX(-2px);
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.2);
        }
        
        .mobile-menu-item:active {
            transform: translateX(-1px) scale(0.98);
        }
        
        /* تحسينات إضافية للقائمة الجانبية */
        .mobile-menu {
            max-height: 80vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .mobile-menu::-webkit-scrollbar {
            width: 4px;
        }
        
        .mobile-menu::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        .mobile-menu::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 2px;
        }
        
        .mobile-menu::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu nav {
            padding: 0.5rem 0;
        }
        
        .mobile-menu nav a {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: inherit;
            position: relative;
            z-index: 1;
        }
        
        .mobile-menu nav a i {
            transition: transform 0.2s ease;
        }
        
        .mobile-menu nav a:hover i {
            transform: scale(1.1);
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > * + * {
            margin-top: 0.5rem;
        }
        
        .mobile-menu .space-y-2 > * {
            margin-bottom: 0.5rem;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:last-child {
            margin-bottom: 0;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:first-child {
            margin-top: 0;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:not(:first-child) {
            margin-top: 0.5rem;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:not(:last-child) {
            margin-bottom: 0.5rem;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:not(:first-child):not(:last-child) {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:only-child {
            margin-top: 0;
            margin-bottom: 0;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:first-child:last-child {
            margin-top: 0;
            margin-bottom: 0;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:nth-child(odd) {
            background-color: rgba(249, 115, 22, 0.02);
        }
        
        .mobile-menu .space-y-2 > *:nth-child(even) {
            background-color: rgba(249, 115, 22, 0.01);
        }
        
        .mobile-menu .space-y-2 > *:hover {
            background-color: #fef3c7 !important;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:active {
            background-color: #fed7aa !important;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:focus {
            outline: 2px solid #f97316;
            outline-offset: 2px;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:focus-visible {
            outline: 2px solid #f97316;
            outline-offset: 2px;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:focus-within {
            outline: 2px solid #f97316;
            outline-offset: 2px;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:target {
            outline: 2px solid #f97316;
            outline-offset: 2px;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:target-within {
            outline: 2px solid #f97316;
            outline-offset: 2px;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:visited {
            color: #6b7280;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:link {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:any-link {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:local-link {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:scope {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:current {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:past {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:future {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:playing {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:paused {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:seeking {
            color: #374151;
        }
        
        /* تحسينات للقائمة الجانبية في الهاتف المحمول */
        .mobile-menu .space-y-2 > *:buffering {
            color: #374151;
        }
        
        .mobile-search-container {
            margin-bottom: 1rem;
        }
        
        .mobile-search-input {
            font-size: 16px; /* Prevents zoom on iOS */
            padding: 0.75rem 1rem;
        }
        
        /* Mobile Search Modal Styles */
        #mobileSearchModal {
            backdrop-filter: blur(4px);
        }
        
        #mobileSearchModal .bg-white {
            animation: slideInUp 0.3s ease-out;
        }
        
        @keyframes slideInUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        #mobileSearchModal.hidden {
            animation: fadeOut 0.2s ease-in;
        }
        
        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }
        
        .user-menu-container {
            position: relative;
        }
        
        .dropdown-menu {
            right: 0;
            left: auto;
            min-width: 200px;
            z-index: 9999;
            position: absolute;
            top: 100%;
            margin-top: 0.5rem;
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }
        
        .footer-content {
            grid-template-columns: 1fr;
            gap: 2rem;
            text-align: center;
        }
        
        .footer-bottom {
            flex-direction: column;
            gap: 1rem;
            text-align: center;
        }
    }
    
    @media (max-width: 480px) {
        .header-container {
            padding: 0.5rem 0.75rem;
        }
        
        .header-logo {
            height: 2rem;
        }
        
        .mobile-menu {
            padding: 0.75rem;
        }
        
        .mobile-menu-item {
            padding: 0.625rem;
            font-size: 0.9rem;
        }
        
        .mobile-search-input {
            padding: 0.625rem 0.875rem;
            font-size: 16px;
        }
        
        .dropdown-menu {
            min-width: 180px;
            font-size: 0.9rem;
        }
    }
    
    /* Simple Dropdown CSS */
    .user-menu-container {
        position: relative;
    }
    
    #dropdown-menu {
        position: absolute;
        right: 0;
        top: 100%;
        margin-top: 5px;
        min-width: 200px;
        background: white;
        border: 1px solid #ddd;
        border-radius: 5px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        z-index: 10000;
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
    }
    
    #dropdown-menu.show {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    #dropdown-menu a {
        display: block;
        padding: 10px 15px;
        color: #333;
        text-decoration: none;
        border-bottom: 1px solid #eee;
    }
    
    #dropdown-menu a:last-child {
        border-bottom: none;
    }
    
    #dropdown-menu a:hover {
        background-color: #f5f5f5;
    }
    
    /* Additional Mobile Improvements */
    @media (max-width: 768px) {
        /* Touch-friendly buttons */
        .btn-touch {
            min-height: 44px;
            min-width: 44px;
            padding: 0.75rem 1rem;
        }
        
        /* Better spacing for mobile */
        .mobile-spacing {
            margin: 0.5rem 0;
        }
        
        /* Improved text readability */
        .mobile-text {
            line-height: 1.6;
        }
        
        /* Better form inputs */
        .mobile-input {
            font-size: 16px; /* Prevents zoom on iOS */
            padding: 0.875rem 1rem;
            border-radius: 0.5rem;
        }
        
        /* Improved card spacing */
        .mobile-card {
            margin-bottom: 1rem;
        }
        
        /* Better modal positioning */
        .mobile-modal {
            margin: 1rem;
            max-width: calc(100vw - 2rem);
        }
        
        /* Improved navigation */
        .mobile-nav {
            padding: 0.75rem 1rem;
        }
        
        /* Better image handling */
        .mobile-image {
            width: 100%;
            height: auto;
            object-fit: cover;
        }
        
        /* Improved button groups */
        .mobile-button-group {
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .mobile-button-group .btn {
            width: 100%;
        }
        
        /* Better list spacing */
        .mobile-list {
            padding: 0.5rem 0;
        }
        
        .mobile-list-item {
            padding: 0.75rem 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        /* Improved grid layouts */
        .mobile-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        /* Better text sizing */
        .mobile-h1 {
            font-size: 1.75rem;
            line-height: 1.3;
        }
        
        .mobile-h2 {
            font-size: 1.5rem;
            line-height: 1.3;
        }
        
        .mobile-h3 {
            font-size: 1.25rem;
            line-height: 1.4;
        }
        
        .mobile-body {
            font-size: 1rem;
            line-height: 1.6;
        }
        
        .mobile-small {
            font-size: 0.875rem;
            line-height: 1.5;
        }
    }
    
    /* Touch improvements */
    @media (hover: none) and (pointer: coarse) {
        /* Remove hover effects on touch devices */
        .hover\:scale-105:hover {
            transform: none;
        }
        
        .hover\:shadow-lg:hover {
            box-shadow: none;
        }
        
        /* Add active states for touch */
        .btn:active {
            transform: scale(0.98);
        }
        
        .card:active {
            transform: scale(0.99);
        }
    }
    
    /* High DPI display improvements */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
        .mobile-image {
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }
    }
    /* رسالة تسجيل الخروج */
    .logout-toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        z-index: 9999;
        transform: translateX(400px);
        transition: transform 0.3s ease-in-out;
        display: flex;
        align-items: center;
        gap: 12px;
        max-width: 350px;
    }
    .logout-toast.show {
        transform: translateX(0);
    }
    .logout-toast .icon {
        font-size: 20px;
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
    }
    
    /* رسالة نجاح تسجيل الدخول/التسجيل */
    .auth-success-toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(249, 115, 22, 0.3);
        z-index: 9999;
        transform: translateX(400px);
        transition: transform 0.3s ease-in-out;
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 300px;
        max-width: 400px;
    }
    .auth-success-toast.show {
        transform: translateX(0);
    }
    .auth-success-toast .icon {
        font-size: 20px;
        animation: pulse 2s infinite;
    }
    
    /* Cart count animation */
    #cart-count {
        transition: all 0.3s ease;
    }
    
    #cart-count.animate-pulse {
        animation: pulse 1s ease-in-out;
    }
    
    /* رسالة إعلامية */
    .info-toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        z-index: 9999;
        transform: translateX(400px);
        transition: transform 0.3s ease-in-out;
        display: flex;
        align-items: center;
        gap: 12px;
        max-width: 350px;
    }
    .info-toast.show {
        transform: translateX(0);
    }
    .info-toast .icon {
        font-size: 20px;
        animation: pulse 2s infinite;
    }
    
    /* رسالة خطأ */
    .error-toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
        z-index: 9999;
        transform: translateX(400px);
        transition: transform 0.3s ease-in-out;
        display: flex;
        align-items: center;
        gap: 12px;
        max-width: 350px;
    }
    .error-toast.show {
        transform: translateX(0);
    }
    .error-toast .icon {
        font-size: 20px;
        animation: pulse 2s infinite;
    }
    .swiper-wrapper {
        scrollbar-width: none; /* For Firefox */
    }
    .swiper-wrapper::-webkit-scrollbar {
        display: none; /* For Chrome, Safari, and Opera */
    }
    /* Recipe card flip styles */
    .card-container {
        perspective: 1000px;
        width: 280px;
        height: 400px;
        margin: 0;
        position: relative;
        user-select: none;
        pointer-events: auto;
    }
    .card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        transition: transform 0.6s;
        transform-style: preserve-3d;
    }
    .card-container.is-flipped .card-inner {
        transform: rotateY(180deg);
    }
    .card-front,
    .card-back {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 1.5rem;
        overflow: hidden;
        box-shadow: 0 8px 24px rgba(0,0,0,0.08);
        display: flex;
        flex-direction: column;
    }
    .card-front { 
        background: #fff; 
    }
    .card-back { 
        background: #fff; 
        transform: rotateY(180deg); 
    }
    
    /* Smooth transitions for better UX */
    .card-container * {
        pointer-events: none;
    }
    .card-container a,
    .card-container button {
        pointer-events: auto;
    }
    
    /* Ensure card container is clickable */
    .card-container {
        pointer-events: auto !important;
    }
    
    /* Make sure card inner is also clickable */
    .card-inner {
        pointer-events: auto !important;
    }
    
    /* Make sure card front and back are clickable */
    .card-front,
    .card-back {
        pointer-events: auto !important;
    }
    
    /* Ensure all card elements are clickable */
    .card-container * {
        pointer-events: none;
    }
    .card-container a,
    .card-container button {
        pointer-events: auto;
    }
    .card-container {
        pointer-events: auto !important;
    }
    
    /* Cards are now static - no hover effects needed */
    
    /* Save button on card front styling */
    .card-front .save-recipe-btn {
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
    }
    
    .card-front .save-recipe-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .card-front .save-recipe-btn.bg-orange-500\/80 {
        background-color: rgba(249, 115, 22, 0.8) !important;
    }
    
    .card-front .save-recipe-btn.bg-orange-500\/80:hover {
        background-color: rgba(234, 88, 12, 0.9) !important;
    }
    
    /* Line clamp utilities */
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    
    .swiper, .swiper-container { padding: 0 !important; margin: 0 !important; }
    .swiper-slide {
        flex: 0 0 auto;
        width: 280px;
        height: 400px;
        box-sizing: border-box;
        display: flex;
        align-items: center;
        justify-content: center;
        background: transparent;
    }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    
    <!-- Simple dropdown fix -->
    <script>
        function toggleUserMenu() {
            const container = document.getElementById('user-menu-container');
            const dropdown = document.getElementById('user-menu-dropdown') || document.getElementById('dropdown-menu');
            const button = document.getElementById('user-menu-button');

            if (!dropdown || (container && container.dataset.dropdownInitialized === 'true')) {
                return;
            }

            const isHidden = dropdown.classList.contains('hidden');

            if (isHidden) {
                dropdown.classList.remove('hidden');
                dropdown.classList.add('show');
                dropdown.setAttribute('aria-hidden', 'false');
                if (button) {
                    button.setAttribute('aria-expanded', 'true');
                }
            } else {
                dropdown.classList.add('hidden');
                dropdown.classList.remove('show');
                dropdown.setAttribute('aria-hidden', 'true');
                if (button) {
                    button.setAttribute('aria-expanded', 'false');
                }
            }
        }
        window.toggleUserMenu = toggleUserMenu;
    </script>
    
        <link rel="stylesheet" href="https://wasfah.ae/css/search-enhancements.css">
</head>
<body class="bg-gray-100 font-sans" data-user-id="">

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/95 backdrop-blur border-b border-orange-100 shadow-sm">
    <div class="h-1 w-full bg-gradient-to-l from-orange-500 via-rose-500 to-amber-400 hidden md:block"></div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between gap-4 py-3 md:py-4 header-container">
            <div class="flex items-center gap-4 min-w-0">
                <a href="https://wasfah.ae" class="flex items-center gap-3 text-slate-800">
                    <img src="https://wasfah.ae/image/logo.webp" alt="Logo" class="h-12 w-auto inline header-logo" loading="eager" fetchpriority="high">
                    <span class="hidden md:inline text-xl font-bold tracking-tight"></span>
                </a>

                <nav class="hidden lg:flex items-center gap-1 text-sm font-medium text-slate-600" aria-label="التصفح الرئيسي">
                                                                    <a href="https://wasfah.ae"
                           class="flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-200 hover:text-orange-600 hover:bg-orange-50 border border-transparent">
                            <i class="fas fa-house text-base"></i>
                            <span>الرئيسية</span>
                        </a>
                                                                    <a href="https://wasfah.ae/recipes"
                           class="flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-200 hover:text-orange-600 hover:bg-orange-50 border border-transparent">
                            <i class="fas fa-utensils text-base"></i>
                            <span>الوصفات</span>
                        </a>
                                                                    <a href="https://wasfah.ae/workshops"
                           class="flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-200 hover:text-orange-600 hover:bg-orange-50 border border-transparent">
                            <i class="fas fa-graduation-cap text-base"></i>
                            <span>ورشات العمل</span>
                        </a>
                                                                    <a href="https://wasfah.ae/tools"
                           class="flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-200 hover:text-orange-600 hover:bg-orange-50 border border-transparent">
                            <i class="fas fa-kitchen-set text-base"></i>
                            <span>أدوات الشيف</span>
                        </a>
                                    </nav>
            </div>

            <div class="flex items-center gap-2 md:hidden mobile-menu-btn">
                <button id="mobileSearchBtn" class="flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-500 shadow-sm transition-all duration-200 hover:border-orange-300 hover:text-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <span class="sr-only">فتح البحث</span>
                </button>

                <a href="https://wasfah.ae/saved" class="relative flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-500 shadow-sm transition-all duration-200 hover:border-orange-300 hover:text-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"/>
                    </svg>
                    <span id="mobile-cart-count" class="absolute -top-1 -right-1 bg-orange-500 text-white text-[10px] font-bold rounded-full h-5 w-5 flex items-center justify-center hidden min-w-[20px]">0</span>
                    <span class="sr-only">الأدوات المحفوظة</span>
                </a>

                
                <button id="mobileMenuBtn" class="flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white text-slate-500 shadow-sm transition-all duration-200 hover:border-orange-300 hover:text-orange-500 focus:outline-none focus:ring-2 focus:ring-orange-200">
                    <svg id="menu-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7"/>
                    </svg>
                    <svg id="close-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                    <span class="sr-only">القائمة</span>
                </button>
            </div>

            <div class="hidden md:flex flex-1 items-center justify-end gap-5 text-slate-600 header-nav">
                <div class="relative flex-1 max-w-xl group" id="search-container">
                    <input id="search-input"
                           dir="rtl"
                           type="text"
                           placeholder="ابحث عن وصفة، أداة، أو ورشة..."
                           value=""
                           autocomplete="off"
                           spellcheck="false"
                           class="w-full rounded-full border border-slate-200 bg-slate-50 pr-12 pl-5 py-2.5 text-sm text-slate-700 placeholder:text-slate-400 shadow-inner transition-all duration-200 focus:border-orange-400 focus:bg-white focus:outline-none focus:ring-2 focus:ring-orange-300 group-hover:bg-white">
                    <button id="search-submit" type="button" class="absolute left-2.5 top-1/2 flex h-9 w-9 -translate-y-1/2 items-center justify-center rounded-full border border-transparent bg-white text-slate-500 shadow-sm transition-colors duration-200 hover:text-orange-500 hover:border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-200">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <span class="sr-only">بدء البحث</span>
                    </button>
                </div>

                <nav class="flex items-center gap-2 text-sm font-medium text-slate-600" aria-label="روابط الحساب">
                    <a href="https://wasfah.ae/saved" class="relative flex items-center gap-2 rounded-full border border-transparent bg-white px-3 py-2 text-slate-500 shadow-sm transition-all duration-200 hover:border-orange-200 hover:bg-orange-50 hover:text-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-200">
                        <i class="fas fa-bookmark text-base"></i>
                        <span class="hidden xl:inline">الأدوات المحفوظة</span>
                        <span id="saved-count" class="absolute -top-1 -right-1 bg-orange-500 text-white text-[10px] font-bold rounded-full h-5 w-5 flex items-center justify-center hidden min-w-[20px]">0</span>
                    </a>

                    
                                            <a href="https://wasfah.ae/login" class="rounded-full border border-transparent bg-orange-500 px-4 py-2 text-white shadow-sm transition-all duration-200 hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-200">تسجيل الدخول</a>
                        <a href="https://wasfah.ae/register" class="rounded-full border border-orange-200 px-4 py-2 text-orange-600 transition-all	duration-200 hover:border-orange-300 hover:bg-orange-50 focus:outline-none focus:ring-2 focus:ring-orange-200">إنشاء حساب</a>
                                    </nav>
            </div>
        </div>
    </div>

    <div id="mobileMenu" class="mobile-menu hidden border-t border-orange-100 bg-white/95 shadow-lg backdrop-blur md:hidden" style="display: none;">
        <nav class="flex flex-col gap-2 p-4 text-slate-700">
            <a href="https://wasfah.ae" class="flex items-center gap-3 rounded-xl bg-orange-50/60 p-3 font-semibold text-orange-600 transition hover:bg-orange-100">
                <i class="fas fa-house text-orange-500"></i>
                <span>الرئيسية</span>
            </a>
            <a href="https://wasfah.ae/recipes" class="flex items-center gap-3 rounded-xl p-3 transition hover:bg-orange-50">
                <i class="fas fa-utensils text-orange-500"></i>
                <span>الوصفات</span>
            </a>
            <a href="https://wasfah.ae/tools" class="flex items-center gap-3 rounded-xl p-3 transition hover:bg-orange-50">
                <i class="fas fa-kitchen-set text-orange-500"></i>
                <span>أدوات الشيف</span>
            </a>
            <a href="https://wasfah.ae/workshops" class="flex items-center gap-3 rounded-xl p-3 transition hover:bg-orange-50">
                <i class="fas fa-graduation-cap text-orange-500"></i>
                <span>ورشات العمل</span>
            </a>
            <a href="https://wasfah.ae/saved" class="relative flex items-center gap-3 rounded-xl p-3 transition hover:bg-orange-50">
                <i class="fas fa-bookmark text-orange-500"></i>
                <span>الأدوات المحفوظة</span>
                <span id="saved-count-mobile" class="absolute left-3 top-3 bg-orange-500 text-white text-[10px] font-bold rounded-full h-5 w-5 flex items-center justify-center hidden min-w-[20px]">0</span>
            </a>
                                        <a href="https://wasfah.ae/login" class="flex items-center gap-3 rounded-xl bg-orange-500 p-3 font-semibold text-white transition hover:bg-orange-600">
                    <i class="fas fa-right-to-bracket"></i>
                    <span>تسجيل الدخول</span>
                </a>
                <a href="https://wasfah.ae/register" class="flex items-center gap-3 rounded-xl border border-orange-200 p-3 font-semibold text-orange-600 transition hover:border-orange-300 hover:bg-orange-50">
                    <i class="fas fa-user-plus"></i>
                    <span>إنشاء حساب</span>
                </a>
                    </nav>
    </div>

    <div id="mobileSearchModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 p-4">
        <div class="w-full max-w-md rounded-2xl bg-white/95 p-6 shadow-2xl backdrop-blur">
            <div class="mb-6 flex items-center justify-between">
                <h3 class="text-xl font-bold text-slate-900">البحث</h3>
                <button id="closeMobileSearchModal" class="text-slate-400 transition hover:text-slate-600">
                    <i class="fas fa-times text-xl"></i>
                    <span class="sr-only">إغلاق</span>
                </button>
            </div>
            <div class="relative" id="mobile-search-container">
                <input id="mobile-search-input"
                       dir="rtl"
                       type="text"
                       placeholder="ابحث عن وصفة، أداة، أو ورشة..."
                       autocomplete="off"
                       spellcheck="false"
                       class="w-full rounded-2xl border border-slate-200 bg-slate-50 pr-12 pl-5 py-3 text-lg text-slate-700 placeholder:text-slate-400 transition-all duration-200 focus:border-orange-400 focus:bg-white focus:outline-none focus:ring-2 focus:ring-orange-300">
                <button id="mobile-search-submit" class="absolute left-3 top-1/2 flex h-10 w-10 -translate-y-1/2 items-center justify-center rounded-full border border-transparent bg-white text-slate-500 shadow-sm transition hover:text-orange-500 hover:border-orange-300 focus:outline-none focus:ring-2 focus:ring-orange-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <span class="sr-only">بدء البحث</span>
                </button>
            </div>
        </div>
    </div>
</header>

    <!-- Main Navigation Bar -->
    <!-- <nav class="bg-white border-t border-gray-200 shadow-sm ">
        <div class="container mx-auto px-4 py-3">
            <ul class="flex justify-center space-x-8 rtl:space-x-reverse text-gray-700 font-semibold">
                <li><a href="https://wasfah.ae" class="hover:text-orange-500 transition-colors">الرئيسية</a></li>
                <li><a href="#" class="hover:text-orange-500 transition-colors">ورشات</a></li>
                <li><a href="#" class="hover:text-orange-500 transition-colors">ادوات الشيف</a></li>
                <li><a href="#" class="hover:text-orange-500 transition-colors">أصناف الحلويات</a></li>
            </ul>
        </div>
    </nav> -->


    <!-- Page Content -->
    <main>
        <nav class="bg-white border-b border-gray-200" aria-label="مسار التنقل" itemscope itemtype="https://schema.org/BreadcrumbList">
        <div class="container mx-auto px-4 py-3">
            <ol class="flex flex-wrap items-center text-sm text-gray-500">
                                                        <li class="flex items-center" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                                                    <a href="https://wasfah.ae" class="hover:text-orange-500 transition-colors" itemprop="item">
                                <span itemprop="name">الرئيسية</span>
                            </a>
                                                <meta itemprop="position" content="1">

                                                    <span class="mx-2 text-gray-400">/</span>
                                            </li>
                                                        <li class="flex items-center" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                                                    <span class="text-gray-700 font-medium" itemprop="name">
                                عن وصفة
                            </span>
                            <meta itemprop="item" content="https://wasfah.ae/about">
                                                <meta itemprop="position" content="2">

                                            </li>
                            </ol>
        </div>
    </nav>

        <div class="min-h-screen bg-gray-50 py-8">
    <div class="container mx-auto px-4">
        <!-- Hero Section -->
        <div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-2xl text-white p-12 mb-12 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-6">عن وصفة</h1>
            <p class="text-xl md:text-2xl opacity-90 max-w-3xl mx-auto">
                منصة متخصصة في عالم الحلويات والطبخ، نقدم لك أفضل الوصفات وورشات العمل
            </p>
        </div>

        <!-- Mission Section -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-12">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">رؤيتنا</h2>
                    <p class="text-gray-600 text-lg leading-relaxed mb-6">
                        نهدف إلى أن نكون المنصة الرائدة في عالم الحلويات والطبخ في المنطقة العربية، 
                        من خلال تقديم وصفات عالية الجودة وورشات عمل متخصصة تساعد محبي الطبخ 
                        على تطوير مهاراتهم واكتشاف عالم جديد من النكهات.
                    </p>
                    <div class="flex items-center space-x-4 rtl:space-x-reverse">
                        <div class="bg-orange-100 p-3 rounded-full">
                            <i class="fas fa-heart text-orange-600 text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">شغفنا بالطبخ</h3>
                            <p class="text-gray-600">نؤمن أن الطبخ فن وحب</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-br from-orange-100 to-orange-200 rounded-xl p-8 text-center">
                    <i class="fas fa-utensils text-6xl text-orange-600 mb-4"></i>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">أكثر من 25 وصفة</h3>
                    <p class="text-gray-600">وصفات متنوعة من جميع أنحاء العالم</p>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
            <div class="bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow">
                <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-book text-blue-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-4">وصفات متنوعة</h3>
                <p class="text-gray-600">
                    مجموعة شاملة من الوصفات من الحلويات التقليدية إلى الأطباق الحديثة
                </p>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow">
                <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-graduation-cap text-green-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-4">ورشات عمل</h3>
                <p class="text-gray-600">
                    ورشات عمل تفاعلية مع أفضل الشيفات لتعلم تقنيات الطبخ المتقدمة
                </p>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow">
                <div class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-users text-purple-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-4">مجتمع متحمس</h3>
                <p class="text-gray-600">
                    انضم إلى مجتمع من محبي الطبخ وشارك تجاربك ووصفاتك
                </p>
            </div>
        </div>

        <!-- Story Section -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-12">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">قصتنا</h2>
            <div class="max-w-4xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4">البداية</h3>
                        <p class="text-gray-600 leading-relaxed">
                            بدأت وصفة كفكرة بسيطة من مجموعة من محبي الطبخ الذين أرادوا مشاركة 
                            شغفهم مع الآخرين. من خلال سنوات من الخبرة والتطوير، نعمل على 
                            تقديم أفضل تجربة في عالم الحلويات والطبخ.
                        </p>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4">التطور</h3>
                        <p class="text-gray-600 leading-relaxed">
                            تطورنا من مجرد موقع وصفات إلى منصة شاملة تشمل ورشات العمل، 
                            التقييمات، والمجتمع التفاعلي. نستمر في إضافة ميزات جديدة 
                            لتحسين تجربة المستخدمين.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Section -->
        <div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-2xl text-white p-12 mb-12">
            <h2 class="text-3xl font-bold text-center mb-12">إحصائياتنا</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center">
                <div>
                    <div class="text-4xl font-bold mb-2">25+</div>
                    <div class="text-orange-200">وصفة</div>
                </div>
                <div>
                    <div class="text-4xl font-bold mb-2">5+</div>
                    <div class="text-orange-200">ورشة عمل</div>
                </div>
                <div>
                    <div class="text-4xl font-bold mb-2">100+</div>
                    <div class="text-orange-200">مستخدم</div>
                </div>
                <div>
                    <div class="text-4xl font-bold mb-2">8+</div>
                    <div class="text-orange-200">شيف</div>
                </div>
            </div>
        </div>

        <!-- Team Section -->
        <div class="bg-white rounded-2xl shadow-lg p-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">فريقنا</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="bg-gradient-to-br from-orange-400 to-orange-600 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-user text-white text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">فريق التطوير</h3>
                    <p class="text-gray-600">مطورون مبدعون يعملون على تحسين المنصة</p>
                </div>
                <div class="text-center">
                    <div class="bg-gradient-to-br from-green-400 to-green-600 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-chef-hat text-white text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">الشيفات</h3>
                    <p class="text-gray-600">شيفات محترفون يشاركون خبراتهم</p>
                </div>
                <div class="text-center">
                    <div class="bg-gradient-to-br from-blue-400 to-blue-600 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-users text-white text-3xl"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">فريق الدعم</h3>
                    <p class="text-gray-600">فريق دعم متاح لمساعدتك دائماً</p>
                </div>
            </div>
        </div>
    </div>
</div>
    </main>

    <!-- Load Cart Count Script -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Load cart count on page load
        loadCartCount();

        const triggerSavedCounterLoad = () => {
            if (typeof window.loadSavedCount === 'function') {
                window.loadSavedCount({ force: true });
            }
        };

        if (typeof window.loadSavedCount === 'function') {
            triggerSavedCounterLoad();
        } else {
            const handleReady = () => {
                triggerSavedCounterLoad();
                window.removeEventListener('saved-counter:ready', handleReady);
            };
            window.addEventListener('saved-counter:ready', handleReady);
        }
    });
    
    function loadCartCount() {
        fetch('/cart/count')
            .then(response => response.json())
            .then(data => {
                const cartCountEl = document.getElementById('cart-count');
                if (cartCountEl) {
                    const oldCount = parseInt(cartCountEl.textContent) || 0;
                    const newCount = data.count;
                    
                    cartCountEl.textContent = newCount;
                    
                    if (newCount > 0) {
                        cartCountEl.classList.remove('hidden');
                        
                        // Adjust width based on number of digits
                        if (newCount > 9) {
                            cartCountEl.classList.remove('h-5', 'w-5');
                            cartCountEl.classList.add('h-6', 'w-6', 'px-1');
                        } else {
                            cartCountEl.classList.remove('h-6', 'w-6', 'px-1');
                            cartCountEl.classList.add('h-5', 'w-5');
                        }
                        
                        // Add animation if count increased
                        if (newCount > oldCount) {
                            cartCountEl.classList.add('animate-pulse');
                            setTimeout(() => {
                                cartCountEl.classList.remove('animate-pulse');
                            }, 1000);
                        }
                    } else {
                        cartCountEl.classList.add('hidden');
                    }
                }
            })
            .catch(error => {
                console.error('Error loading cart count:', error);
            });
    }
    
    // Make function globally available
    window.loadCartCount = loadCartCount;
    </script>

    <!-- Footer -->
    <footer class="bg-orange-50 pt-12 pb-6">
    <div class="container mx-auto px-4">
        <!-- Main Footer Content -->
        <div class="grid grid-cols-1 gap-10 pb-10 border-b border-gray-200 footer-content sm:grid-cols-2 lg:grid-cols-12">
            <!-- Brand -->
            <div class="space-y-4 text-center sm:text-right lg:col-span-3">
                <h3 class="text-sm font-semibold text-orange-500 tracking-wider uppercase">شعار وصفة</h3>
                <div class="flex items-center justify-center sm:justify-end space-x-3 rtl:space-x-reverse">
                    <img src="https://wasfah.ae/image/logo.webp" alt="شعار وصفة" class="h-12 w-auto" loading="eager" fetchpriority="high">
                </div>
                <p class="text-gray-600 leading-relaxed">
                    منصّة وصفة للحلويات الفاخرة والراقية، نرافقك في كل خطوة لتقديم أطيب الحلويات.
                </p>
            </div>

            <!-- Explore -->
            <div class="space-y-4 text-center sm:text-right lg:col-span-3">
                <h3 class="text-sm font-semibold text-orange-500 tracking-wider uppercase">اكتشف</h3>
                <ul class="space-y-2 text-gray-600">
                    <li>
                        <a href="https://wasfah.ae/recipes" class="hover:text-orange-500 transition-colors">جميع الوصفات</a>
                    </li>
                    <li>
                        <a href="https://wasfah.ae/workshops" class="hover:text-orange-500 transition-colors">ورشات العمل</a>
                    </li>
                    <li>
                        <a href="https://wasfah.ae/baking-tips" class="hover:text-orange-500 transition-colors">نصائح الحلويات</a>
                    </li>
                </ul>
            </div>

            <!-- Quick Guide -->
            <div class="space-y-4 text-center sm:text-right lg:col-span-3">
                <h3 class="text-sm font-semibold text-orange-500 tracking-wider uppercase">الدليل السريع</h3>
                <ul class="space-y-2 text-gray-600">
                    <li>
                        <a href="https://wasfah.ae/tools" class="hover:text-orange-500 transition-colors">أدوات الشيف</a>
                    </li>
                    <li>
                        <a href="https://wasfah.ae/search" class="hover:text-orange-500 transition-colors">البحث عن وصفة</a>
                    </li>
                    <li>
                        <a href="https://wasfah.ae/about" class="hover:text-orange-500 transition-colors">من نحن</a>
                    </li>
                </ul>
            </div>

            <!-- Contact Info -->
            <div class="space-y-4 text-center sm:text-right lg:col-span-3">
                <h3 class="text-sm font-semibold text-orange-500 tracking-wider uppercase">تواصل معنا</h3>
                <div class="space-y-3 text-gray-600">
                    <div class="flex items-center justify-center space-x-2 rtl:space-x-reverse sm:justify-end">
                        <i class="fas fa-envelope text-orange-500"></i>
                        <span><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="087f697b6e69603131486f65696164266b6765">[email&#160;protected]</a></span>
                    </div>
                    <div class="pt-2">
                        <a href="https://wasfah.ae/contact" class="inline-block hover:text-orange-500 transition-colors">اتصل بنا</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Bar -->
        <div class="pt-6 flex flex-col gap-3 text-sm text-gray-500 footer-bottom md:flex-row md:items-center md:justify-between">
            <div class="text-center md:text-right">
                <span>&copy; 2025 وصفة. جميع الحقوق محفوظة.</span>
            </div>
            <div class="flex flex-col items-center gap-1 text-center md:flex-row md:items-center md:gap-4">
                <span>موقع وصفة هو جزء من شركة وصفة الأردن.</span>
                <span class="hidden text-gray-300 md:inline-block">|</span>
                <span>نهتم بجودة تفاصيل كل وصفة.</span>
            </div>
        </div>
    </div>
</footer>

    <!-- resources/views/components/confirmation-modal.blade.php -->
<div id="confirmationModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4" style="backdrop-filter: blur(4px);">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 m-4" style="animation: slideInUp 0.3s ease-out;">
        <div class="text-center">
            <div class="mb-4">
                <i class="fas fa-exclamation-triangle text-5xl text-red-500"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">هل أنت متأكد؟</h3>
            <p class="text-gray-600 mb-6" id="confirmationModalMessage" data-default-message="لا يمكن التراجع عن هذا الإجراء. سيتم حذف العنصر نهائياً.">
                لا يمكن التراجع عن هذا الإجراء. سيتم حذف العنصر نهائياً.
            </p>
            <div class="flex justify-center space-x-4 rtl:space-x-reverse">
                <button id="cancelButton" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-6 rounded-lg transition-colors">
                    إلغاء
                </button>
                <button id="confirmButton" data-default-label="تأكيد" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-colors">
                    تأكيد
                </button>
            </div>
        </div>
    </div>
</div>

    <link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/header-Dt_uZCzA.js" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/mobile-menu-DrOodOOd.js" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/save-recipe-8zA1jhpf.js" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/script-DTC4w_UL.js" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/search-CvpFTx27.js" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/recipe-CJW6wbrr.js" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/recipe-save-button-Cd1yJfGj.js" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/notification-manager--HZ6oqF1.js" /><link rel="modulepreload" as="script" href="https://wasfah.ae/build/assets/confirmation-modal-Jq-B1J7c.js" /><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="module" src="https://wasfah.ae/build/assets/header-Dt_uZCzA.js" data-navigate-track="reload"></script><script type="module" src="https://wasfah.ae/build/assets/mobile-menu-DrOodOOd.js" data-navigate-track="reload"></script><script type="module" src="https://wasfah.ae/build/assets/save-recipe-8zA1jhpf.js" data-navigate-track="reload"></script><script type="module" src="https://wasfah.ae/build/assets/script-DTC4w_UL.js" data-navigate-track="reload"></script><script type="module" src="https://wasfah.ae/build/assets/search-CvpFTx27.js" data-navigate-track="reload"></script><script type="module" src="https://wasfah.ae/build/assets/recipe-CJW6wbrr.js" data-navigate-track="reload"></script><script type="module" src="https://wasfah.ae/build/assets/recipe-save-button-Cd1yJfGj.js" data-navigate-track="reload"></script><script type="module" src="https://wasfah.ae/build/assets/notification-manager--HZ6oqF1.js" data-navigate-track="reload"></script><script type="module" src="https://wasfah.ae/build/assets/confirmation-modal-Jq-B1J7c.js" data-navigate-track="reload"></script>    
    <!-- Notification System JavaScript -->
    <script>
        // Notification dropdown functions
        function toggleNotificationDropdown() {
            const dropdown = document.getElementById('notification-dropdown');
            if (dropdown) {
                dropdown.classList.toggle('hidden');
                
                // Load notifications when dropdown is opened
                if (!dropdown.classList.contains('hidden')) {
                    loadNotificationDropdown();
                }
            }
        }

        // Close notification dropdown when clicking outside
        document.addEventListener('click', (event) => {
            const notificationContainer = document.getElementById('notification-container');
            const notificationDropdown = document.getElementById('notification-dropdown');
            
            if (notificationContainer && notificationDropdown && 
                !notificationContainer.contains(event.target)) {
                notificationDropdown.classList.add('hidden');
            }
        });

        // Load notifications in dropdown
        function loadNotificationDropdown() {
            const notificationList = document.getElementById('notification-list');
            if (!notificationList) return;

            // Show loading state
            notificationList.innerHTML = `
                <div class="p-4 text-center text-gray-500">
                    <i class="fas fa-spinner fa-spin text-xl mb-2"></i>
                    <p>جاري تحميل الإشعارات...</p>
                </div>
            `;

            // Load notifications using NotificationManager
            if (window.NotificationManager) {
                window.NotificationManager.getNotifications((data, error) => {
                    if (error) {
                        console.error('Error loading notifications:', error);
                        notificationList.innerHTML = `
                            <div class="p-4 text-center text-red-500">
                                <i class="fas fa-exclamation-circle text-xl mb-2"></i>
                                <p>حدث خطأ في تحميل الإشعارات</p>
                            </div>
                        `;
                        return;
                    }

                    const notifications = data?.notifications || [];
                    if (notifications.length === 0) {
                        notificationList.innerHTML = `
                            <div class="p-4 text-center text-gray-500">
                                <i class="fas fa-bell-slash text-xl mb-2"></i>
                                <p>لا توجد إشعارات</p>
                            </div>
                        `;
                    } else {
                        let notificationsHTML = '';
                        notifications.slice(0, 5).forEach(notification => {
                            const isRead = notification.is_read;
                            const timeAgo = new Date(notification.created_at).toLocaleDateString('ar-SA', {
                                year: 'numeric',
                                month: 'short',
                                day: 'numeric',
                                hour: '2-digit',
                                minute: '2-digit'
                            });
                            
                            notificationsHTML += `
                                <div class="p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer notification-dropdown-item ${isRead ? 'opacity-75' : 'bg-orange-50'}" 
                                     data-notification-id="${notification.id}">
                                    <div class="flex items-start space-x-3 rtl:space-x-reverse">
                                        <div class="flex-shrink-0">
                                            <div class="w-8 h-8 ${notification.type === 'workshop_booking' ? 'bg-blue-100' : (notification.type === 'workshop_confirmed' ? 'bg-green-100' : (notification.type === 'workshop_cancelled' ? 'bg-red-100' : 'bg-orange-100'))} rounded-full flex items-center justify-center">
                                                <i class="fas fa-${notification.type === 'workshop_booking' ? 'calendar-plus' : (notification.type === 'workshop_confirmed' ? 'check-circle' : (notification.type === 'workshop_cancelled' ? 'times-circle' : 'info-circle'))} text-xs ${notification.type === 'workshop_booking' ? 'text-blue-600' : (notification.type === 'workshop_confirmed' ? 'text-green-600' : (notification.type === 'workshop_cancelled' ? 'text-red-600' : 'text-orange-600'))}"></i>
                                            </div>
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm font-medium text-gray-900 ${isRead ? '' : 'font-bold'}">${notification.title}</p>
                                            <p class="text-xs text-gray-500 mt-1">${notification.message}</p>
                                            <p class="text-xs text-gray-400 mt-1">${timeAgo}</p>
                                        </div>
                                        ${!isRead ? '<div class="w-2 h-2 bg-orange-500 rounded-full flex-shrink-0 mt-2"></div>' : ''}
                                    </div>
                                </div>
                            `;
                        });
                        
                        notificationList.innerHTML = notificationsHTML;

                        notificationList.querySelectorAll('.notification-dropdown-item').forEach(item => {
                            const notificationId = item.dataset.notificationId;
                            const notificationData = notifications.find(n => String(n.id) === String(notificationId));

                            if (notificationData?.action_url) {
                                item.dataset.actionUrl = notificationData.action_url;
                            }

                            item.addEventListener('click', (event) => {
                                if (event.target.closest('button')) {
                                    return;
                                }

                                const actionUrl = item.dataset.actionUrl || '';

                                if (typeof openNotification === 'function') {
                                    openNotification(notificationId, actionUrl);
                                } else if (actionUrl) {
                                    window.location.href = actionUrl;
                                } else {
                                    markNotificationAsRead(notificationId);
                                }
                            });
                        });
                    }
                });
            }
        }

        // Mark notification as read
        function markNotificationAsRead(notificationId) {
            return fetch(`/notifications/${notificationId}/mark-read`, {
                method: 'POST',
                headers: {
                    'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').getAttribute('content'),
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update notification count
                    updateNotificationCounts();
                    // Reload dropdown
                    loadNotificationDropdown();
                }

                return data;
            })
            .catch(error => {
                console.error('Error marking notification as read:', error);
                throw error;
            });
        }

        function openNotification(notificationId, actionUrl = '') {
            const navigate = () => {
                if (actionUrl) {
                    window.location.href = actionUrl;
                }
            };

            if (!notificationId) {
                navigate();
                return;
            }

            markNotificationAsRead(notificationId)
                .finally(navigate);
        }

        window.openNotification = openNotification;

        // Update notification counts
        function updateNotificationCounts() {
            if (window.NotificationManager) {
                window.NotificationManager.getNotifications((data, error) => {
                    if (error) {
                        console.error('Error updating notification counts:', error);
                        return;
                    }

                    const count = data?.unreadCount || 0;
                    if (typeof window.NotificationManager.updateBadgeElements === 'function') {
                        window.NotificationManager.updateBadgeElements(count);
                    } else {
                        const badges = document.querySelectorAll('[data-notification-badge]');
                        badges.forEach(element => {
                            element.textContent = count;
                            if (count > 0) {
                                element.classList.remove('hidden');
                                element.setAttribute('aria-hidden', 'false');
                            } else {
                                element.classList.add('hidden');
                                element.setAttribute('aria-hidden', 'true');
                            }
                        });
                    }
                });
            }
        }

        // Mark all notifications as read
        document.addEventListener('click', (event) => {
            if (event.target.id === 'mark-all-read-btn') {
                fetch('/notifications/mark-all-read', {
                    method: 'POST',
                    headers: {
                        'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').getAttribute('content'),
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        updateNotificationCounts();
                        loadNotificationDropdown();
                    }
                })
                .catch(error => {
                    console.error('Error marking all as read:', error);
                });
            }
        });

        // Initialize notification system
        document.addEventListener('DOMContentLoaded', function() {
            // Load notification counts on page load
            updateNotificationCounts();
            
            // Update notification counts every 30 seconds
            setInterval(updateNotificationCounts, 30000);
        });
    </script>
    
    <script>
        // Simple dropdown function (backup)
        function toggleUserMenuBackup() {
            const container = document.getElementById('user-menu-container');
            const dropdownMenu = document.getElementById('user-menu-dropdown') || document.getElementById('dropdown-menu');
            const userMenuButton = document.getElementById('user-menu-button');

            if (!dropdownMenu || !userMenuButton || (container && container.dataset.dropdownInitialized === 'true')) {
                return;
            }

            const isHidden = dropdownMenu.classList.contains('hidden');

            if (isHidden) {
                dropdownMenu.classList.remove('hidden');
                dropdownMenu.classList.add('show');
                dropdownMenu.setAttribute('aria-hidden', 'false');
                userMenuButton.setAttribute('aria-expanded', 'true');
            } else {
                dropdownMenu.classList.add('hidden');
                dropdownMenu.classList.remove('show');
                dropdownMenu.setAttribute('aria-hidden', 'true');
                userMenuButton.setAttribute('aria-expanded', 'false');
            }
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const container = document.getElementById('user-menu-container');
            const dropdownMenu = document.getElementById('user-menu-dropdown') || document.getElementById('dropdown-menu');
            const userMenuButton = document.getElementById('user-menu-button');
            
            if (!dropdownMenu || !userMenuButton || (container && container.dataset.dropdownInitialized === 'true')) {
                return;
            }
            
            if (
                !userMenuButton.contains(e.target) &&
                !dropdownMenu.contains(e.target)
            ) {
                dropdownMenu.classList.add('hidden');
                dropdownMenu.classList.remove('show');
                dropdownMenu.setAttribute('aria-hidden', 'true');
                userMenuButton.setAttribute('aria-expanded', 'false');
                console.log('Dropdown closed - clicked outside');
            }
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM Content Loaded - Initializing mobile menu...');
            
            // Simple dropdown setup (fallback)
            const container = document.getElementById('user-menu-container');
            const userMenuButton = document.getElementById('user-menu-button');
            const dropdownMenu = document.getElementById('user-menu-dropdown') || document.getElementById('dropdown-menu');
            
            if (container && userMenuButton && dropdownMenu && container.dataset.dropdownInitialized !== 'true') {
                dropdownMenu.classList.add('hidden');
                dropdownMenu.classList.remove('show');
                dropdownMenu.setAttribute('aria-hidden', 'true');
                userMenuButton.setAttribute('aria-expanded', 'false');
                container.dataset.dropdownInitialized = 'fallback';
                
                const fallbackClickHandler = function(e) {
                    if (container.dataset.dropdownInitialized === 'true') {
                        userMenuButton.removeEventListener('click', fallbackClickHandler);
                        return;
                    }

                    e.preventDefault();
                    e.stopPropagation();
                    toggleUserMenuBackup();
                };

                userMenuButton.addEventListener('click', fallbackClickHandler);
            }
            
            // Mobile Menu Setup - Simple and Direct
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            const menuIcon = document.getElementById('menu-icon');
            const closeIcon = document.getElementById('close-icon');
            
            console.log('Mobile menu elements:', {
                mobileMenuBtn: !!mobileMenuBtn,
                mobileMenu: !!mobileMenu,
                menuIcon: !!menuIcon,
                closeIcon: !!closeIcon
            });
            
            if (mobileMenuBtn && mobileMenu && menuIcon && closeIcon) {
                console.log('All mobile menu elements found, setting up click handler...');
                
                // Direct click handler - no complex functions
                mobileMenuBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('Mobile menu button clicked!');
                    
                    // Check current state
                    const isHidden = mobileMenu.classList.contains('hidden') || !mobileMenu.classList.contains('show');
                    console.log('Current state - isHidden:', isHidden);
                    
                    if (isHidden) {
                        // Show menu
                        console.log('Opening mobile menu...');
                        mobileMenu.classList.remove('hidden');
                        mobileMenu.classList.add('show');
                        mobileMenu.style.display = 'block';
                        menuIcon.classList.add('hidden');
                        closeIcon.classList.remove('hidden');
                        console.log('Mobile menu opened successfully');
                    } else {
                        // Hide menu
                        console.log('Closing mobile menu...');
                        mobileMenu.classList.add('hidden');
                        mobileMenu.classList.remove('show');
                        mobileMenu.style.display = 'none';
                        menuIcon.classList.remove('hidden');
                        closeIcon.classList.add('hidden');
                        console.log('Mobile menu closed successfully');
                    }
                });
                
                // Close menu when clicking outside
                document.addEventListener('click', function(e) {
                    if (!mobileMenuBtn.contains(e.target) && !mobileMenu.contains(e.target)) {
                        if (mobileMenu.classList.contains('show')) {
                            console.log('Closing menu - clicked outside');
                            mobileMenu.classList.add('hidden');
                            mobileMenu.classList.remove('show');
                            mobileMenu.style.display = 'none';
                            menuIcon.classList.remove('hidden');
                            closeIcon.classList.add('hidden');
                        }
                    }
                });
                
                console.log('Mobile menu setup completed successfully!');
            } else {
                console.error('Mobile menu elements not found!', {
                    mobileMenuBtn: mobileMenuBtn,
                    mobileMenu: mobileMenu,
                    menuIcon: menuIcon,
                    closeIcon: closeIcon
                });
            }
            
            // Test function for debugging
            window.testMobileMenu = function() {
                console.log('Testing mobile menu...');
                const mobileMenu = document.getElementById('mobileMenu');
                const menuIcon = document.getElementById('menu-icon');
                const closeIcon = document.getElementById('close-icon');
                
                if (mobileMenu && menuIcon && closeIcon) {
                    const isHidden = mobileMenu.classList.contains('hidden');
                    console.log('Current state - isHidden:', isHidden);
                    
                    if (isHidden) {
                        mobileMenu.classList.remove('hidden');
                        mobileMenu.classList.add('show');
                        mobileMenu.style.display = 'block';
                        menuIcon.classList.add('hidden');
                        closeIcon.classList.remove('hidden');
                        console.log('Menu opened via test function');
                    } else {
                        mobileMenu.classList.add('hidden');
                        mobileMenu.classList.remove('show');
                        mobileMenu.style.display = 'none';
                        menuIcon.classList.remove('hidden');
                        closeIcon.classList.add('hidden');
                        console.log('Menu closed via test function');
                    }
                } else {
                    console.error('Mobile menu elements not found for testing');
                }
            };
        });
        
        // Mobile menu is now handled by mobile-menu.js
            
            // Mobile search functionality
            const searchInput = document.getElementById('search-input');
            const mobileSearchInput = document.getElementById('mobile-search-input');
            const searchSubmit = document.getElementById('search-submit');
            const mobileSearchSubmit = document.getElementById('mobile-search-submit');
            
            function performSearch(query) {
                if (query.trim()) {
                    window.location.href = `/search?q=${encodeURIComponent(query)}`;
                }
            }
            
            if (searchInput && searchSubmit) {
                searchSubmit.addEventListener('click', (e) => {
                    e.preventDefault();
                    performSearch(searchInput.value);
                });
                
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        performSearch(searchInput.value);
                    }
                });
            }
            
            if (mobileSearchInput && mobileSearchSubmit) {
                mobileSearchSubmit.addEventListener('click', (e) => {
                    e.preventDefault();
                    performSearch(mobileSearchInput.value);
                });
                
                mobileSearchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        performSearch(mobileSearchInput.value);
                    }
                });
            }
            
            // Touch improvements
            if ('ontouchstart' in window) {
                // Add touch class to body for CSS targeting
                document.body.classList.add('touch-device');
                
                // Improve touch targets
                const touchElements = document.querySelectorAll('a, button, input, select, textarea');
                touchElements.forEach(element => {
                    if (element.offsetHeight < 44) {
                        element.classList.add('btn-touch');
                    }
                });
            }
            
            // Prevent zoom on input focus (iOS)
            const inputs = document.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.addEventListener('focus', () => {
                    if (window.innerWidth < 768) {
                        const viewport = document.querySelector('meta[name="viewport"]');
                        if (viewport) {
                            viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
                        }
                    }
                });
                
                input.addEventListener('blur', () => {
                    if (window.innerWidth < 768) {
                        const viewport = document.querySelector('meta[name="viewport"]');
                        if (viewport) {
                            viewport.setAttribute('content', 'width=device-width, initial-scale=1.0');
                        }
                    }
                });
            });
            
            // Smooth scrolling for mobile
            const links = document.querySelectorAll('a[href^="#"]');
            links.forEach(link => {
                link.addEventListener('click', (e) => {
                    const targetId = link.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        e.preventDefault();
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Lazy loading for images
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.classList.remove('lazy');
                                observer.unobserve(img);
                            }
                        }
                    });
                });
                
                const lazyImages = document.querySelectorAll('img[data-src]');
                lazyImages.forEach(img => imageObserver.observe(img));
            }
        });
            
            // تحميل عدد الأدوات المحفوظة
            setTimeout(() => {
                if (typeof loadSavedCount === 'function') {
                    loadSavedCount();
                } else {
                    console.log('loadSavedCount function not found, trying again...');
                    setTimeout(() => {
                        if (typeof loadSavedCount === 'function') {
                            loadSavedCount();
                        } else {
                            console.error('loadSavedCount function still not found');
                        }
                    }, 500);
                }
            }, 100);
        });
    </script>
    <script>
        (function () {
            const KB_IN_BYTES = 1024;

            function handleFileInput(event) {
                const target = event.target;
                if (!target || target.tagName !== 'INPUT' || target.type !== 'file') {
                    return;
                }

                const maxSizeKb = parseInt(target.dataset.maxSize || '', 10);
                if (!maxSizeKb) {
                    return;
                }

                const files = target.files;
                if (!files || files.length === 0) {
                    hideMessage(target);
                    return;
                }

                const maxBytes = maxSizeKb * KB_IN_BYTES;
                const oversizeFile = Array.from(files).find(file => file.size > maxBytes);

                if (oversizeFile) {
                    target.value = '';
                    const message = target.dataset.maxSizeMessage
                        || `لا يمكن رفع ملف أكبر من ${formatMegabytes(maxSizeKb)} ميجابايت.`;
                    showMessage(target, message);
                    return;
                }

                hideMessage(target);
            }

            function showMessage(input, message) {
                const selector = input.dataset.errorTarget;
                if (selector) {
                    document.querySelectorAll(selector).forEach(el => {
                        el.textContent = message;
                        el.classList.remove('hidden');
                    });
                } else {
                    window.alert(message);
                }
            }

            function hideMessage(input) {
                const selector = input.dataset.errorTarget;
                if (!selector) {
                    return;
                }

                document.querySelectorAll(selector).forEach(el => {
                    el.textContent = '';
                    el.classList.add('hidden');
                });
            }

            function formatMegabytes(valueKb) {
                const value = valueKb / KB_IN_BYTES;
                return Number.isInteger(value) ? value : value.toFixed(1);
            }

            document.addEventListener('change', handleFileInput);
            document.addEventListener('input', handleFileInput);
        })();
    </script>
        
    <!-- CSS للعداد -->
    <style>
        #saved-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #f97316;
            color: white;
            font-size: 0.75rem;
            font-weight: bold;
            border-radius: 50%;
            height: 20px;
            width: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 20px;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        #saved-count.hidden {
            display: none !important;
        }
    </style>
    
    <!-- تحميل عداد الأدوات المحفوظة -->
    <script>
        (function() {
            const state = {
                value: null,
                pending: null,
                lastFetchedAt: 0,
                minInterval: 15000
            };

            const CSRF_SELECTOR = 'meta[name="csrf-token"]';

            function normalizeCount(value) {
                const parsed = Number(value);
                if (!Number.isFinite(parsed) || parsed <= 0) {
                    return 0;
                }
                return Math.max(0, Math.round(parsed));
            }

            function renderSavedCounter(count) {
                const savedCountEl = document.getElementById('saved-count');
                if (savedCountEl) {
                    if (count > 0) {
                        savedCountEl.textContent = count;
                        savedCountEl.classList.remove('hidden');
                    } else {
                        savedCountEl.classList.add('hidden');
                    }
                }

                const mobileCartCountEl = document.getElementById('mobile-cart-count');
                if (mobileCartCountEl) {
                    if (count > 0) {
                        mobileCartCountEl.textContent = count;
                        mobileCartCountEl.classList.remove('hidden');
                        mobileCartCountEl.classList.add('animate-pulse');
                        setTimeout(() => mobileCartCountEl.classList.remove('animate-pulse'), 300);
                    } else {
                        mobileCartCountEl.classList.add('hidden');
                    }
                }

                const mobileSavedCountEl = document.getElementById('saved-count-mobile');
                if (mobileSavedCountEl) {
                    if (count > 0) {
                        mobileSavedCountEl.textContent = count;
                        mobileSavedCountEl.classList.remove('hidden');
                    } else {
                        mobileSavedCountEl.classList.add('hidden');
                    }
                }

                const savedCountBadge = document.getElementById('saved-count-badge');
                if (savedCountBadge) {
                    if (count > 0) {
                        savedCountBadge.textContent = count;
                        savedCountBadge.classList.remove('hidden');
                    } else {
                        savedCountBadge.classList.add('hidden');
                    }
                }
            }

            function setSavedCount(count) {
                const normalized = normalizeCount(count);
                state.value = normalized;
                renderSavedCounter(normalized);
                return normalized;
            }

            function updateSavedCountUI(count) {
                return setSavedCount(count);
            }

            function requestSavedCount(options = {}) {
                const force = Boolean(options.force);
                const now = Date.now();

                if (!force) {
                    if (state.pending) {
                        return state.pending;
                    }

                    if (state.value !== null && now - state.lastFetchedAt < state.minInterval) {
                        return Promise.resolve(state.value);
                    }
                }

                const csrfToken = document.querySelector(CSRF_SELECTOR)?.getAttribute('content') || '';

                state.pending = fetch('/saved/count', {
                    method: 'GET',
                    headers: {
                        'X-CSRF-TOKEN': csrfToken,
                        'Content-Type': 'application/json',
                        'Accept': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    credentials: 'same-origin',
                    cache: 'no-cache'
                })
                .then(response => {
                    if (response.status === 401) {
                        setSavedCount(0);
                        return 0;
                    }
                    if (!response.ok) {
                        throw new Error('HTTP error! status: ' + response.status);
                    }
                    return response.json();
                })
                .then(data => setSavedCount(data?.count))
                .catch(error => {
                    console.error('Error loading saved count:', error);
                    if (state.value === null) {
                        setSavedCount(0);
                    }
                    throw error;
                })
                .finally(() => {
                    state.lastFetchedAt = Date.now();
                    state.pending = null;
                });

                return state.pending;
            }

            function applySavedCountDelta(delta) {
                if (typeof delta !== 'number' || !Number.isFinite(delta) || delta === 0) {
                    return requestSavedCount({ force: true });
                }
                const next = Math.max(0, (state.value ?? 0) + Math.round(delta));
                return Promise.resolve(setSavedCount(next));
            }

            function handleSavedCounterChanged(event) {
                const detail = event.detail || {};
                if (typeof detail.count === 'number') {
                    setSavedCount(detail.count);
                    return;
                }
                if (typeof detail.delta === 'number') {
                    applySavedCountDelta(detail.delta);
                    return;
                }
                requestSavedCount({ force: true });
            }

            document.addEventListener('DOMContentLoaded', () => {
                requestSavedCount({ force: true });
            });

            document.addEventListener('visibilitychange', () => {
                if (!document.hidden) {
                    requestSavedCount();
                }
            });

            window.addEventListener('saved-counter:changed', handleSavedCounterChanged);
            window.addEventListener('saved-counter:refresh', () => requestSavedCount({ force: true }));

            window.updateSavedCountUI = updateSavedCountUI;
            window.loadSavedCount = (options) => {
                if (options && typeof options === 'object' && 'force' in options) {
                    return requestSavedCount({ force: Boolean(options.force) });
                }
                if (typeof options === 'boolean') {
                    return requestSavedCount({ force: options });
                }
                return requestSavedCount();
            };
            window.applySavedCountDelta = applySavedCountDelta;
            window.getSavedCount = () => state.value;

            if (typeof toggleUserMenu === 'function') {
                window.toggleUserMenu = toggleUserMenu;
            }

            window.dispatchEvent(new Event('saved-counter:ready'));
        })();
    </script>

    
    <!-- رسالة تسجيل الخروج -->
        
    <!-- رسالة نجاح تسجيل الدخول/التسجيل -->
        
    <!-- رسالة إعلامية -->
        
    <!-- رسالة خطأ -->
        
    <!-- دالة معالجة روابط Google Drive -->
    <script>
        function convertGoogleDriveUrl(url) {
            if (!url || !url.includes('drive.google.com')) {
                return url;
            }
            
            try {
                // تنسيق 1: https://drive.google.com/file/d/FILE_ID/view
                let match = url.match(/\/file\/d\/([a-zA-Z0-9-_]+)/);
                if (match && match[1]) {
                    return `https://lh3.googleusercontent.com/d/${match[1]}`;
                }
                
                // تنسيق 2: https://drive.google.com/open?id=FILE_ID
                if (url.includes('id=')) {
                    const urlParams = new URLSearchParams(new URL(url).search);
                    const fileId = urlParams.get('id');
                    if (fileId) {
                        return `https://lh3.googleusercontent.com/d/${fileId}`;
                    }
                }
                
                // تنسيق 3: https://drive.google.com/uc?id=FILE_ID
                if (url.includes('uc?id=')) {
                    const urlParams = new URLSearchParams(new URL(url).search);
                    const fileId = urlParams.get('id');
                    if (fileId) {
                        return `https://lh3.googleusercontent.com/d/${fileId}`;
                    }
                }
                
                // تنسيق 4: https://drive.google.com/thumbnail?id=FILE_ID
                if (url.includes('thumbnail?id=')) {
                    const urlParams = new URLSearchParams(new URL(url).search);
                    const fileId = urlParams.get('id');
                    if (fileId) {
                        return `https://lh3.googleusercontent.com/d/${fileId}`;
                    }
                }
                
                // تنسيق 5: استخراج ID من أي رابط Google Drive
                const idMatch = url.match(/[a-zA-Z0-9-_]{25,}/);
                if (idMatch) {
                    return `https://lh3.googleusercontent.com/d/${idMatch[0]}`;
                }
                
            } catch (error) {
                console.warn('Error converting Google Drive URL:', error);
            }
            
            return url;
        }
        
        // تطبيق التحويل على جميع الصور عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            // معالجة جميع الصور التي تحتوي على روابط Google Drive
            const images = document.querySelectorAll('img[src*="drive.google.com"]');
            images.forEach(function(img) {
                const originalSrc = img.src;
                const convertedSrc = convertGoogleDriveUrl(originalSrc);
                if (convertedSrc !== originalSrc) {
                    img.src = convertedSrc;
                }
            });
            
            // معالجة الصور التي يتم تحميلها ديناميكياً
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    mutation.addedNodes.forEach(function(node) {
                        if (node.nodeType === 1) { // Element node
                            if (node.tagName === 'IMG' && node.src && node.src.includes('drive.google.com')) {
                                const convertedSrc = convertGoogleDriveUrl(node.src);
                                if (convertedSrc !== node.src) {
                                    node.src = convertedSrc;
                                }
                            }
                            // معالجة الصور داخل العناصر المضافة
                            const images = node.querySelectorAll && node.querySelectorAll('img[src*="drive.google.com"]');
                            if (images) {
                                images.forEach(function(img) {
                                    const convertedSrc = convertGoogleDriveUrl(img.src);
                                    if (convertedSrc !== img.src) {
                                        img.src = convertedSrc;
                                    }
                                });
                            }
                        }
                    });
                });
            });
            
            // مراقبة التغييرات في DOM
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        });
    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"30a6e8d48f30453c921bd583f0e05319","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>



