<?php

namespace Database\Seeders;

use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use App\Models\Recipe;

class RecipeSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $this->createApprovedRecipe([
            'title' => 'براونيز التيراميسو',
            'description' => 'مزيج رائع يجمع بين قوام البراونيز الغني ونكهة التيراميسو الإيطالية الكلاسيكية.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/brownies.webp',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '20 دقيقة',
            'cook_time' => '30 دقيقة',
            'servings' => '8 أشخاص',
            'difficulty' => 'متوسط',
            'steps' => [ "سخن الفرن إلى 180 درجة مئوية.", "ذوب الشوكولاتة والزبدة.", "اخفق السكر والبيض.", "أضف خليط الشوكولاتة.", "اخلط المكونات الجافة وأضفها.", "اسكب نصف الخليط في القالب.", "اغمس أصابع البسكويت في القهوة ورتبها.", "وزع جبنة الماسكاربوني ثم باقي الخليط.", "اخبز لمدة 25-30 دقيقة." ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'فتوش',
            'description' => 'سلطة لبنانية منعشة، مثالية كطبق جانبي صحي ولذيذ.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/fattoush.png',
            'video_url' => null,
            'category_id' => 2,
            'prep_time' => '15 دقيقة',
            'cook_time' => '5 دقائق',
            'servings' => '4 أشخاص',
            'difficulty' => 'سهل',
            'steps' => [ "اغسل وقطع جميع الخضروات.", "افرم البقدونس والنعناع.", "اخلط مكونات الصلصة.", "اخلط الخضروات مع الصلصة.", "قدمها مع الخبز المحمص." ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'تارت الشوكولاتة الذهبي الفاخر',
            'description' => 'وصفة احترافية لتارت لا ينسى.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/golden_tart.png',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '45 دقيقة',
            'cook_time' => '15 دقيقة',
            'servings' => '6 أشخاص',
            'difficulty' => 'صعب',
            'steps' => [ "حضر عجينة التارت واتركها ترتاح.", "افرد العجينة واخبزها.", "حضر حشوة الجاناش.", "املأ التارت بالجاناش.", "زين بالشوكولاتة المجهزة واللون الذهبي." ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'كيكة الليمون الإسفنجية بالزبادي',
            'description' => 'كيكة يومية خفيفة ومنعشة.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/lemon_cake.png',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '20 دقيقة',
            'cook_time' => '40 دقيقة',
            'servings' => '8 أشخاص',
            'difficulty' => 'سهل',
            'steps' => [ "سخن الفرن وجهز القالب.", "اخفق البيض والسكر.", "أضف المكونات السائلة.", "اخلط المكونات الجافة وأضفها.", "اخلط برفق واسكب الخليط في القالب.", "اخبز لمدة 35-40 دقيقة." ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'كرات الطاقة بالتمر والمكسرات',
            'description' => 'وصفة صحية وسريعة بدون خبز.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/energy_balls.png',
            'video_url' => null,
            'category_id' => 3,
            'prep_time' => '15 دقيقة',
            'cook_time' => '0 دقائق',
            'servings' => '15 كرة',
            'difficulty' => 'سهل جداً',
            'steps' => [ "اطحن التمر والمكسرات.", "أضف باقي المكونات واخلط.", "شكل العجينة إلى كرات.", "دحرج الكرات في جوز الهند للتزيين.", "ضعها في الثلاجة لتتماسك." ]
        ]);
        
        $this->createApprovedRecipe([
            'title' => 'باستا ألفريدو بالدجاج',
            'description' => 'طبق باستا كريمي وغني بصلصة ألفريدو وقطع الدجاج.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/chicken_alfredo.png',
            'video_url' => null,
            'category_id' => 4,
            'prep_time' => '15 دقيقة',
            'cook_time' => '20 دقيقة',
            'servings' => '4 أشخاص',
            'difficulty' => 'متوسط',
            'steps' => [ "اسلق الباستا.", "اطبخ الدجاج المقطع.", "حضر صلصة الألفريدو بالزبدة والثوم والكريمة والبارميزان.", "اخلط الباستا والدجاج مع الصلصة." ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'برجر لحم كلاسيكي',
            'description' => 'برجر لحم شهي بالطريقة الأمريكية التقليدية.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/classic_burger.png',
            'video_url' => null,
            'category_id' => 4,
            'prep_time' => '10 دقائق',
            'cook_time' => '15 دقيقة',
            'servings' => '4 أشخاص',
            'difficulty' => 'سهل',
            'steps' => [ "شكل اللحم المفروم إلى أقراص.", "اشوي أقراص البرجر.", "حمص خبز البرجر.", "اجمع البرجر مع الإضافات المفضلة." ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'شوربة عدس',
            'description' => 'شوربة عدس دافئة ومغذية، مثالية للأيام الباردة.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/lentil_soup.png',
            'video_url' => null,
            'category_id' => 5,
            'prep_time' => '10 دقائق',
            'cook_time' => '30 دقيقة',
            'servings' => '6 أشخاص',
            'difficulty' => 'سهل',
            'steps' => [ "قلّب البصل والجزر في الزيت.", "أضف العدس المغسول والمرق والكمون.", "اطبخ حتى ينضج العدس.", "اخلط الشوربة وقدمها مع الليمون." ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'سلطة يونانية',
            'description' => 'سلطة منعشة ومليئة بالنكهات المتوسطية.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/greek_salad.png',
            'video_url' => null,
            'category_id' => 2,
            'prep_time' => '15 دقيقة',
            'cook_time' => '0 دقائق',
            'servings' => '4 أشخاص',
            'difficulty' => 'سهل',
            'steps' => [ "قطع الطماطم، الخيار، البصل، والفلفل.", "أضف جبنة الفيتا والزيتون.", "اخلط زيت الزيتون، الليمون، والأوريغانو للصلصة.", "اسكب الصلصة فوق السلطة." ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'كوكيز رقائق الشوكولاتة',
            'description' => 'كوكيز كلاسيكي مقرمش من الخارج وطري من الداخل.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/chocolate_chip_cookies.png',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '15 دقيقة',
            'cook_time' => '12 دقيقة',
            'servings' => '24 قطعة',
            'difficulty' => 'سهل',
            'steps' => [ "اخلط الزبدة مع السكر.", "أضف البيض والفانيليا.", "اخلط المكونات الجافة.", "أضف رقائق الشوكولاتة.", "شكل العجين واخبزه." ]
        ]);

        // وصفات حلويات فاخرة من أفضل الشيفات العالميين
        $this->createApprovedRecipe([
            'title' => 'تارت التارتوفو الإيطالي الفاخر',
            'description' => 'وصفة احترافية من الشيف الإيطالي الشهير، تجمع بين نكهة التارتوفو الإيطالية الكلاسيكية وقوام التارت الفرنسي الرائع.',
            'author' => 'Chef Massimo Bottura',
            'image_url' => 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=800',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '60 دقيقة',
            'cook_time' => '25 دقيقة',
            'servings' => '8 أشخاص',
            'difficulty' => 'صعب جداً',
            'steps' => [
                "حضر عجينة التارت الباردة واتركها ترتاح ساعتين في الثلاجة.",
                "افرد العجينة في قالب التارت واخبزها حتى تصبح ذهبية.",
                "حضر كريمة التارتوفو بالشوكولاتة الداكنة والكريمة الثقيلة.",
                "أضف مسحوق التارتوفو الأبيض والكاكاو عالي الجودة.",
                "املأ التارت بالكريمة واتركه يبرد في الثلاجة.",
                "زين بمسحوق الكاكاو والشوكولاتة المبشورة.",
                "قدم مع التوت الطازج والنعناع."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'سوفليه الشوكولاتة الفرنسي الكلاسيكي',
            'description' => 'وصفة السوفليه الفرنسي الأصيلة من مطبخ الشيف الفرنسي الشهير، تتميز بقوامها الهوائي ونكهتها الرائعة.',
            'author' => 'Chef Alain Ducasse',
            'image_url' => 'https://images.unsplash.com/photo-1606313564200-e75d8e8f0f6e?w=800',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '45 دقيقة',
            'cook_time' => '15 دقيقة',
            'servings' => '6 أشخاص',
            'difficulty' => 'صعب',
            'steps' => [
                "سخن الفرن إلى 200 درجة مئوية وادهن أطباق السوفليه بالزبدة والسكر.",
                "ذوب الشوكولاتة الداكنة عالية الجودة في حمام مائي.",
                "اخفق صفار البيض مع السكر حتى يصبح كريمي.",
                "اخفق بياض البيض مع قليل من الملح حتى يصبح قاسياً.",
                "اخلط الشوكولاتة مع صفار البيض برفق.",
                "أضف بياض البيض المخفوق برفق شديد.",
                "اسكب الخليط في أطباق السوفليه واخبز فوراً لمدة 12-15 دقيقة.",
                "قدم ساخناً مع الآيس كريم الفانيليا."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'تيراميسو الإيطالي الأصيل',
            'description' => 'وصفة التيراميسو الكلاسيكية من الشيف الإيطالي الشهير، تجمع بين نكهة القهوة الإيطالية وجبنة الماسكاربوني الفاخرة.',
            'author' => 'Chef Gino D\'Acampo',
            'image_url' => 'https://images.unsplash.com/photo-1571877227200-a0d98ea607e9?w=800',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '30 دقيقة',
            'cook_time' => '0 دقائق',
            'servings' => '8 أشخاص',
            'difficulty' => 'متوسط',
            'steps' => [
                "حضر القهوة الإيطالية القوية واتركها تبرد.",
                "اخفق جبنة الماسكاربوني مع صفار البيض والسكر.",
                "أضف الكاكاو عالي الجودة وخلط برفق.",
                "اغمس أصابع السافوياردي في القهوة الباردة.",
                "رتب طبقة من الأصابع في قاع الطبق.",
                "وزع نصف كمية الماسكاربوني فوق الأصابع.",
                "كرر الطبقات واتركه في الثلاجة 4 ساعات.",
                "زين بمسحوق الكاكاو قبل التقديم."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'كيكة الشوكولاتة الألمانية الفاخرة',
            'description' => 'وصفة الكيكة الألمانية الشهيرة من الشيف الألماني، تتميز بقوامها الرطب ونكهة الشوكولاتة الغنية.',
            'author' => 'Chef Tim Raue',
            'image_url' => 'https://images.unsplash.com/photo-1606312619070-d48b4c652a52?w=800',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '40 دقيقة',
            'cook_time' => '50 دقيقة',
            'servings' => '12 شخص',
            'difficulty' => 'متوسط',
            'steps' => [
                "سخن الفرن إلى 180 درجة مئوية وادهن قالب الكيك.",
                "ذوب الشوكولاتة الداكنة والزبدة في حمام مائي.",
                "اخفق البيض مع السكر حتى يصبح كريمي وخفيف.",
                "أضف الفانيليا وخلط الشوكولاتة المذابة.",
                "اخلط الدقيق والكاكاو والملح في وعاء منفصل.",
                "أضف المكونات الجافة للخليط السائل برفق.",
                "اسكب في القالب واخبز لمدة 45-50 دقيقة.",
                "اتركه يبرد قبل إزالة القالب والتقديم."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'كريم برولي الفرنسي الكلاسيكي',
            'description' => 'وصفة الكريم برولي الأصيلة من الشيف الفرنسي الشهير، تتميز بطبقة الكراميل المقرمشة والكريمة الناعمة.',
            'author' => 'Chef Pierre Hermé',
            'image_url' => 'https://images.unsplash.com/photo-1551024506-0bccd828d307?w=800',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '35 دقيقة',
            'cook_time' => '30 دقيقة',
            'servings' => '6 أشخاص',
            'difficulty' => 'متوسط',
            'steps' => [
                "سخن الفرن إلى 150 درجة مئوية.",
                "حضر الكريمة بالحليب والكريمة الثقيلة والفانيليا.",
                "اخفق صفار البيض مع السكر حتى يصبح كريمي.",
                "أضف الكريمة الساخنة للبيض برفق مع الخلط المستمر.",
                "صف الخليط في أطباق الكريم برولي.",
                "اخبز في حمام مائي لمدة 30 دقيقة.",
                "اتركه يبرد ثم ضعه في الثلاجة 4 ساعات.",
                "رش السكر فوق الكريمة وذوبه بالشعلة حتى يصبح كراميل."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'ماكورون الفرنسي الفاخر',
            'description' => 'وصفة الماكورون الفرنسي الأصيلة من الشيف الفرنسي الشهير، تتميز بقوامها الهش والحشوة الكريمية الرائعة.',
            'author' => 'Chef Ladurée',
            'image_url' => 'https://images.unsplash.com/photo-1551024506-0bccd828d307?w=800',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '90 دقيقة',
            'cook_time' => '15 دقيقة',
            'servings' => '20 قطعة',
            'difficulty' => 'صعب جداً',
            'steps' => [
                "اخلط اللوز المطحون مع السكر البودرة ومرر من المنخل.",
                "اخفق بياض البيض مع قليل من الملح حتى يصبح قاسياً.",
                "أضف السكر تدريجياً واخفق حتى يصبح لامع.",
                "أضف الألوان الغذائية والخلط برفق.",
                "اخلط اللوز مع بياض البيض برفق شديد.",
                "اسكب الخليط في كيس الحلواني وارسم دوائر على ورق الخبز.",
                "اتركه يجف 30 دقيقة ثم اخبز لمدة 12-15 دقيقة.",
                "حضر الحشوة الكريمية واملأ الماكورون بعد التبريد."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'منسف أردني أصيل',
            'description' => 'طبق تراثي أردني غني بطبقات الأرز واللحم وصوص الجميد العطري يقدم في الولائم.',
            'author' => 'الشيف عماد المعايطة',
            'image_url' => 'https://images.unsplash.com/photo-1608039829574-50ce3169d6c3?w=800&auto=format&fit=crop',
            'video_url' => null,
            'category_id' => 4,
            'prep_time' => '40 دقيقة',
            'cook_time' => '120 دقيقة',
            'servings' => '6 أشخاص',
            'difficulty' => 'متقدم',
            'steps' => [
                "انقع الجميد المجفف في ماء دافئ طوال الليل ثم اخلطه حتى يصبح صوصاً ناعماً.",
                "اسلق لحم الخروف مع البصل والهيل والقرفة حتى ينضج وتصبح المرقة غنية.",
                "اطه الأرز بالسمن البلدي والمرق مع التوابل حتى يصبح مفلفلاً.",
                "اخلط صوص الجميد مع جزء من مرق اللحم واتركه يغلي برفق دون أن يتكتل.",
                "رتب خبز الشراك ثم الأرز واللحم وصوص الجميد وزين باللوز والصنوبر المحمص."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'كبة لبنية شامية',
            'description' => 'كرات كبة من البرغل الناعم محشوة باللحم والصنوبر وتطهى في لبن متبل بالثوم والنعنع.',
            'author' => 'الشيف ديما الحجاوي',
            'image_url' => 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&auto=format&fit=crop',
            'video_url' => null,
            'category_id' => 4,
            'prep_time' => '30 دقيقة',
            'cook_time' => '45 دقيقة',
            'servings' => '5 أشخاص',
            'difficulty' => 'متوسط',
            'steps' => [
                "اخلط البرغل الناعم مع اللحم المفروم والبهارات لتشكيل عجينة متماسكة.",
                "حضر الحشوة بقلي اللحم مع البصل والصنوبر والملح والفلفل.",
                "شكل أقراص الكبة واحشوها ثم أغلقها بإحكام واقلها نصف قلية.",
                "ذوب النشا في اللبن البارد ثم ضعه على النار وحرك باستمرار حتى يثخن.",
                "أضف الكبة إلى اللبن المتبل بالثوم والنعنع واتركه يغلي لخمس دقائق قبل التقديم."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'سلطة كينوا متوسطية',
            'description' => 'سلطة خفيفة مليئة بالخضار الملونة والأعشاب مع صلصة ليمون زيت الزيتون.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/mediterranean_quinoa_salad.png',
            'video_url' => null,
            'category_id' => 2,
            'prep_time' => '20 دقيقة',
            'cook_time' => '15 دقيقة',
            'servings' => '4 أشخاص',
            'difficulty' => 'سهل',
            'steps' => [
                "اغسل الكينوا جيداً واطبخه في ماء مملح حتى يصبح طرياً ثم برده.",
                "قطع الخيار والطماطم الكرزية والفلفل الملون والبصل الأرجواني قطعاً صغيرة.",
                "اخلط الكينوا مع الخضار والأعشاب الطازجة مثل البقدونس والنعنع والشبت.",
                "اخفق زيت الزيتون مع عصير الليمون والخردل والعسل والملح لصنع الصلصة.",
                "اسكب الصلصة فوق السلطة وقلّب برفق ثم أضف جبنة الفيتا والزيتون الأسود."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'تشيز كيك الزعفران والفستق',
            'description' => 'تشيز كيك بارد بقوام كريمي بنكهة الزعفران الفاخرة مزين بالفستق والعسل.',
            'author' => 'Chef Najla',
            'image_url' => 'image/saffron_cheesecake.png',
            'video_url' => null,
            'category_id' => 1,
            'prep_time' => '25 دقيقة',
            'cook_time' => '0 دقائق',
            'servings' => '8 حصص',
            'difficulty' => 'متوسط',
            'steps' => [
                "اخلط البسكويت السادة المطحون مع الزبدة المذابة واضغطه في قاعدة القالب.",
                "انقع خيوط الزعفران في القليل من الحليب الدافئ حتى يطلق لونه ونكهته.",
                "اخفق الجبنة الكريمية مع القشطة والسكر والفانيليا ثم أضف الزعفران المنقوع.",
                "اسكب المزيج فوق قاعدة البسكويت وسوِّ السطح بملعقة عريضة.",
                "برد التشيز كيك لمدة 4 ساعات ثم زينه بالفستق المحمص ورذاذ العسل."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'شوربة القرع بالكريمة المحمصة',
            'description' => 'شوربة موسمية دافئة بقوام حريري تجمع بين القرع المحمص والكريمة العطرية.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/roasted_pumpkin_soup.png',
            'video_url' => null,
            'category_id' => 5,
            'prep_time' => '15 دقيقة',
            'cook_time' => '35 دقيقة',
            'servings' => '5 أشخاص',
            'difficulty' => 'سهل',
            'steps' => [
                "حمص مكعبات القرع مع زيت الزيتون والملح والفلفل في الفرن حتى تلين.",
                "اقلي البصل والثوم في قدر حتى يذبل ويصبح شفافاً.",
                "أضف القرع المحمص والمرق ودع الخليط يغلي لمدة 10 دقائق.",
                "استخدم الخلاط اليدوي حتى تصبح الشوربة ناعمة وسلسة.",
                "أضف الكريمة السائلة وجوزة الطيب ثم قدمها مع بذور القرع المحمصة."
            ]
        ]);

        $this->createApprovedRecipe([
            'title' => 'بودينغ الشيا بالمانجو وجوز الهند',
            'description' => 'حلوى صحية وباردة تجمع بين قوام بذور الشيا ونعومة المانجو الطازجة.',
            'author' => 'فريق وصفة',
            'image_url' => 'image/mango_chia_pudding.png',
            'video_url' => null,
            'category_id' => 3,
            'prep_time' => '10 دقائق',
            'cook_time' => '0 دقائق',
            'servings' => '4 أكواب',
            'difficulty' => 'سهل جداً',
            'steps' => [
                "اخلط بذور الشيا مع حليب جوز الهند والعسل والفانيليا حتى تتوزع جيداً.",
                "غطِّ الوعاء وضعه في الثلاجة لمدة 4 ساعات أو طوال الليل حتى يتماسك.",
                "اهرَس المانجو الناضجة مع عصير الليمون لصنع صلصة سميكة.",
                "قسّم البودينغ في أكواب وقدّم فوق كل حصة طبقة سخية من صلصة المانجو.",
                "زين بجوز الهند المحمص وشرائح الفاكهة الموسمية قبل التقديم."
            ]
        ]);
    }

    /**
     * Helper to ensure seeded recipes are visible immediately.
     */
    protected function createApprovedRecipe(array $data): void
    {
        Recipe::create(array_merge($data, [
            'status' => Recipe::STATUS_APPROVED,
            'approved_at' => now(),
            'visibility' => Recipe::VISIBILITY_PUBLIC,
        ]));
    }
}

